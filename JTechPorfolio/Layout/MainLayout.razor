@inherits LayoutComponentBase

<MudThemeProvider />
<MudPopoverProvider />
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout>
    <MudAppBar Elevation="1">
        <MudSpacer />
        <MudThemeProvider 
            @bind-IsDarkMode="_isDarkMode" 
            Theme="_theme" 
            />
        <MudToggleIconButton 
            Color="Color.Default"
            @bind-Toggled="_isDarkMode" 
            Icon="@Icons.Material.Filled.DarkMode" 
            ToggledIcon="@Icons.Material.Filled.WbSunny" 
            ToggledColor="@Color.Default"
            Edge="Edge.Start" />
         <MudIconButton 
             Icon="@menuIcon" 
             Color="Color.Inherit" 
             Edge="Edge.False" 
             OnClick="@((e) => DrawerToggle())" 
             />
   </MudAppBar>
    <MudDrawer Breakpoint="@Breakpoint.Md" Variant="@DrawerVariant.Responsive" @bind-Open="@isDrawerOpen">
        <MudDrawerHeader Class="bg-dark align-content-center">
            <MudText Class="text-white align-self-center">Joel Santos Porfolio</MudText>
        </MudDrawerHeader>
        <MudPaper>
            <MudNavMenu>
                <MudNavLink Icon="@Icons.Material.Filled.Home" Color="Color.Inherit" Href="/">Home</MudNavLink>
                <MudNavLink Icon="@Icons.Material.Filled.Note" Color="Color.Inherit" Href="/project">Projects</MudNavLink>
                <MudNavGroup Icon="@Icons.Material.Filled.Gamepad" Title="Playground" Expanded="false">
                    <MudNavLink Icon="@Icons.Material.Filled.Task" Class="mr-4" Color="Color.Inherit" Href="/tasklist">Task List</MudNavLink>
                    <MudNavLink Icon="@Icons.Material.Filled.Calculate" Class="mr-4" Color="Color.Inherit" Href="/calculator">Calculator</MudNavLink>
                    <MudNavLink Icon="@Icons.Material.Filled.Money" Class="mr-4" Color="Color.Inherit" Href="/taxcalculator">Tax Calculator</MudNavLink>
                </MudNavGroup>
            </MudNavMenu>
        </MudPaper>
    </MudDrawer> 
    <MudMainContent>
        @Body
    </MudMainContent>
</MudLayout>

@code {
    MudTheme _theme = new()
    {
        PaletteLight = new PaletteLight()
        {
            Primary = Colors.DeepPurple.Darken2,
            Secondary = Colors.Green.Accent4,
            AppbarBackground = Colors.Gray.Darken1,
            //Background = #fff,
            //DrawerBackground = "#ffffff",
            //Surface = "#ffffff",
            TextPrimary = "#212121",
            TextSecondary = "#757575"
        },
        PaletteDark = new PaletteDark()
        {
            Primary = Colors.Blue.Darken4,
            Secondary = Colors.Green.Accent4,
            AppbarBackground = Colors.Gray.Darken3,
            //Background = #fff,
            //DrawerBackground = "#ffffff",
            //Surface = "#ffffff",
            TextPrimary = "#212121",
            TextSecondary = "#757575"
        },
    };

    private bool _isDarkMode;

    bool isDrawerOpen = true;
    string menuIcon = Icons.Material.Filled.Menu;

    void DrawerToggle()
    {
        isDrawerOpen = !isDrawerOpen;
        
        if (isDrawerOpen)
        {
            menuIcon = Icons.Material.Filled.Close;
        }
        else
        {
            menuIcon = Icons.Material.Filled.Menu;
        }
    }
}
