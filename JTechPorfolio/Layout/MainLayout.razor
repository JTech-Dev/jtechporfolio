@inherits LayoutComponentBase

<MudThemeProvider />
<MudPopoverProvider />
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout>
    <MudAppBar Elevation="1">
        <MudSpacer />
        <MudThemeProvider 
            @bind-IsDarkMode="_isDarkMode" 
            Theme="_theme" 
            />
        <MudToggleIconButton 
            Color="Color.Default"
            @bind-Toggled="_isDarkMode" 
            Icon="@Icons.Material.Filled.DarkMode" 
            ToggledIcon="@Icons.Material.Filled.WbSunny" 
            ToggledColor="@Color.Primary"
            Edge="Edge.Start" />
         <MudIconButton 
             Icon="@menuIcon" 
             Color="Color.Primary" 
             Edge="Edge.False" 
             OnClick="@((e) => DrawerToggle())" 
             />
   </MudAppBar>
    <MudDrawer Breakpoint="@Breakpoint.Md" Variant="@DrawerVariant.Responsive" @bind-Open="@isDrawerOpen">
        <MudDrawerHeader Class="d-flex align-items-center">
           <MudImage style="width: 20px; height: 20px;" Class="img-fluid mx-2" Fluid="true" Src="/images/jtlogo.png" />
           <MudText Color="Color.Primary" Class="text-center fw-bold">JS Portfolio</MudText>
        </MudDrawerHeader>
        <MudPaper Color="Color.Primary">
            <MudNavMenu>
                <MudNavLink Icon="@Icons.Material.Filled.Home" Color="Color.Primary" Href="/">Home</MudNavLink>
                <MudNavLink Icon="@Icons.Material.Filled.Note" Color="Color.Primary" Href="/project">Projects</MudNavLink>
                <MudNavGroup Icon="@Icons.Material.Filled.Gamepad" Title="Playground" Expanded="false">
                    <MudNavLink Icon="@Icons.Material.Filled.Task" Class="mr-4" Color="Color.Primary" Href="/tasklist">Task List</MudNavLink>
                    <MudNavLink Icon="@Icons.Material.Filled.Calculate" Class="mr-4" Color="Color.Primary" Href="/calculator">Calculator</MudNavLink>
                    <MudNavLink Icon="@Icons.Material.Filled.Money" Class="mr-4" Color="Color.Primary" Href="/taxcalculator">Tax Calculator</MudNavLink>
                </MudNavGroup>
            </MudNavMenu>
        </MudPaper>
    </MudDrawer> 
    <MudMainContent>
        @Body
    </MudMainContent>
</MudLayout>

@code {
    MudTheme _theme = new()
    {
        PaletteLight = new PaletteLight()
        {
            Primary = Colors.Gray.Darken3,
            Secondary = Colors.Blue.Darken1,
            AppbarBackground = "#f5f5f5",
            Background = Colors.Gray.Lighten2,
            DrawerBackground = "#f5f5f5",
            Surface = "#f5f5f5",
            TextPrimary = Colors.Gray.Darken4,
            TextSecondary = Colors.Gray.Darken1
        },
        PaletteDark = new PaletteDark()
        {
            Primary = Colors.Gray.Lighten1,
            Secondary = Colors.Blue.Accent4,
            AppbarBackground = Colors.Gray.Darken4,
            Background = Colors.Gray.Darken3,
            DrawerBackground = Colors.Gray.Darken4,
            Surface = Colors.Gray.Darken4,
            TextPrimary = Colors.Gray.Lighten5,
            TextSecondary = Colors.Gray.Lighten1,
            
        },
    };

    private bool _isDarkMode;

    bool isDrawerOpen = false;

    string menuIcon = Icons.Material.Filled.Menu;

    void DrawerToggle()
    {
        isDrawerOpen = !isDrawerOpen;
        
        if (isDrawerOpen)
        {
            menuIcon = Icons.Material.Filled.Close;
        }
        else
        {
            menuIcon = Icons.Material.Filled.Menu;
        }
    }
}
